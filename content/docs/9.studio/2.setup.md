---
title: 设置 Nuxt Studio
description: 学习如何安装和配置 Nuxt Studio，以便在生产环境中通过 GitHub 身份验证编辑您的内容。
navigation:
  title: 设置
seo:
  title: Nuxt Studio 设置指南
  description: 学习如何安装和配置自托管的 Nuxt Studio 模块，用于您的 Nuxt Content 网站。在生产环境中通过 GitHub 身份验证编辑内容。
---

::note{to="https://nuxt.studio/docs/setup"}
此文档仅涵盖新的开源 Nuxt Studio 模块。点击此处查看旧版独立平台的文档。
::

## 安装

在您的项目中使用 Nuxt CLI 安装 Nuxt Studio：

```bash [Terminal]
npx nuxt module add nuxt-studio@beta
```

::tip{icon="i-lucide-rocket"}
启动您的开发服务器并开始编辑您的 Nuxt Content 网站。
::

## 开发模式

上一节的内容足以让您编辑内容。只需点击页面左下角的浮动按钮即可。

在本地运行时，**任何文件更改都将与您的本地文件系统实时同步**。

::note
发布系统仅在生产模式下可用。使用您当前的工作流程（git 命令、IDE、GitHub Desktop...）来提交您的更改。
::

## 生产模式

虽然 Nuxt Studio 在开发过程中很有用（尤其是即将推出的 Studio 编辑器），但它的主要优势是能够直接从生产网站发布更改。

为了在生产环境中发布更改，您需要配置 git 仓库：

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  studio: {
    // Git 仓库配置（owner 和 repo 是必需的）
    repository: {
      provider: 'github', // 'github' 或 'gitlab'
      owner: 'your-username', // 您的 GitHub/GitLab 用户名或组织
      repo: 'your-repo', // 您的仓库名称
      branch: 'main', // 要提交到的分支（默认：'main'）
    }
  }
})
```

::callout{to="#options"}
阅读更多关于所有可用选项的信息。
::

### OAuth 配置

Nuxt Studio 支持通过 GitHub、GitLab 和 Google OAuth 提供商进行身份验证，允许您登录并从生产环境发布更新。

::tip{icon="i-lucide-info" to="/docs/studio/providers#oauth-providers"}
请按照您的 Git 提供商的设置说明进行操作。
::

一旦您的 OAuth 应用设置完成，您应该在您的托管提供商中设置环境变量。

::code-group
```bash [GitHub]
STUDIO_GITHUB_CLIENT_ID=<your_github_client_id>
STUDIO_GITHUB_CLIENT_SECRET=<your_github_client_secret>
```

```bash [GitLab]
STUDIO_GITLAB_APPLICATION_ID=<your_gitlab_application_id>
STUDIO_GITLAB_APPLICATION_SECRET=<your_gitlab_secret>
```

```bash [Google]
STUDIO_GOOGLE_CLIENT_ID=<your_google_client_id>
STUDIO_GOOGLE_CLIENT_SECRET=<your_google_client_secret>
STUDIO_GOOGLE_MODERATORS=admin@example.com,editor@example.com

# 在 GitHub 上发布所需
STUDIO_GITHUB_TOKEN=<pat_token>

# 在 GitLab 上发布所需
STUDIO_GITLAB_TOKEN=<pat_token>
```
::

### 部署

Nuxt Studio 需要一个服务器端路由进行身份验证。

虽然使用 [Nuxt 混合渲染](https://nuxt.com/docs/4.x/guide/concepts/rendering#hybrid-rendering)仍然支持静态生成，但您的站点必须**部署在支持服务器端渲染（SSR）的平台**上，使用 `nuxt build` 命令。

如果您想要预渲染所有页面，请使用以下配置：

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  nitro: {
    prerender: {
      // 预渲染首页
      routes: ['/'],
      // 然后爬取页面上的所有链接
      crawlLinks: true
    }
  }
})
```

### 打开 Studio

部署完成后，通过导航到您配置的路由（默认：`/_studio`）打开 Studio：

1. 如果没有直接重定向到 OAuth 应用授权页面，请点击登录按钮
2. 授权 OAuth 应用
3. 您将被重定向回 Studio，准备编辑您的内容

::tip
您也可以使用快捷键 `CMD` + `.` 重定向到 Studio 路由。
::

## 选项

将模块添加到您的 `nuxt.config.ts` 并根据您的 Git 提供商配置您的仓库：

### 管理路由

使用 `route` 选项自定义登录路由：

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  studio: {
    route: '/admin', // 默认：'/_studio'
  }
})
```

### 仓库

使用 `repository` 选项指定要在生产模式下同步的 git 仓库。

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  studio: {
    repository: {
      provider: 'github', // 'github' 或 'gitlab'，默认：'github'
      owner: 'your-username', // 您的 GitHub/GitLab 用户名或组织
      repo: 'your-repo', // 您的仓库名称
      branch: 'main', // 要提交到的分支（默认：main）
    }
  }
})
```

#### 根目录 `默认：''`

如果您的 Nuxt Content 应用程序在 monorepo 或子目录中，请指定 `rootDir` 选项以指向正确的位置。

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  studio: {
    repository: {
      ...
      rootDir: 'docs'
    }
  }
})
```

#### 私有仓库访问 `默认：true`

默认情况下，Studio 请求访问公共和私有仓库。

设置 `private: false` 将 OAuth 范围限制为仅公共仓库，这在处理公共仓库时出于安全或合规原因可能更可取。

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  studio: {
    repository: {
      ...
      private: false
    }
  }
})
```

### 国际化

Nuxt Studio 包含内置的国际化支持，提供以下语言：

- 🇬🇧 **英语**（默认）
- 🇫🇷 **法语**
- 🇩🇪 **德语**

使用 `i18n` 选项设置您的首选语言：

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  studio: {
    i18n: {
      defaultLocale: 'fr' // 'en'、'fr' 或 'de'
    }
  }
})
```

这将翻译：

- 所有 UI 元素和标签
- Monaco 编辑器片段和代码补全
- 上下文消息和通知

::callout{icon="i-lucide-heart-handshake"}
欢迎社区为新语言翻译做出贡献！如果您想添加对新语言的支持，请访问 [GitHub 仓库](https://github.com/nuxt-content/studio) 并提交 pull request。
::

### 开发模式

如果您想在本地测试您的生产设置，请禁用 `dev` 选项：

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  studio: {
    dev: false
  }
})
```

确保创建另一个 GitHub/GitLab OAuth 应用，该应用重定向到您的本地开发服务器（通常是 <http://localhost:3000>）。
