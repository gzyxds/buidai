---
title: 无服务器托管
description: 如何在各种无服务器平台上部署 Nuxt Content。
navigation:
  title: 无服务器
---

## 什么是无服务器托管？

无服务器托管让您无需直接管理服务器即可运行代码和应用程序 - 您只需上传代码，云提供商会自动处理所有基础设施、扩展和维护，同时只向您收取实际使用的计算资源费用。

**在无服务器环境中，每个用户请求都会触发您的 Nuxt 服务器的新实例，这意味着每次都从零开始。** 这种"无状态"特性意味着您不能在服务器内存中存储数据或使用基于文件的数据库（如 SQLite）。这就是为什么我们需要使用外部数据库服务（如 D1、Turso 或 PostgreSQL），这些服务独立于您的服务器实例持久保存数据。

## 使用无服务器部署

该模块内置了对几个著名无服务器平台的支持。您可以轻松地将项目部署到这些平台。查看每个平台的指南：

- [Cloudflare Pages](/docs/deploy/cloudflare-pages)
- [Vercel](/docs/deploy/vercel)

如果您想部署到其他平台，可以按照以下步骤部署您的项目。

### 1. 选择数据库服务

在部署项目之前，您需要选择一个数据库服务：

::code-group
```ts [PostgreSQL]
// 1. 创建一个 PostgreSQL 数据库
// 2. 并将 `POSTGRES_URL` 添加到环境变量中
export default defineNuxtConfig({
  content: {
    database: {
      type: 'postgresql',
      url: process.env.POSTGRES_URL
    }
  }
})
```

```ts [Cloudflare D1]
// 1. 在您的 CF 账户中创建一个 D1 数据库
// 2. 使用相同的绑定名称将其链接到您的项目
export default defineNuxtConfig({
  content: {
    database: {
      type: 'd1',
      bindingName: '<YOUR_BINDING_NAME>'
    }
  }
})
```

```ts [LibSQL]
// 1. 在 Turso.tech 上创建一个 LibSQL 数据库
// 2. 并将 `TURSO_DATABASE_URL` 和 `TURSO_AUTH_TOKEN` 环境变量添加到项目中
export default defineNuxtConfig({
  modules: ['@nuxt/content'],
  content: {
    database: {
      type: 'libsql',
      url: process.env.TURSO_DATABASE_URL,
      authToken: process.env.TURSO_AUTH_TOKEN,
    }
  }
})
```
::

### 2. 部署您的项目

Nuxt Content 使用 Nuxt 部署预设来调整不同托管平台的构建过程。

支持各种无服务器平台，无需配置：

- [Cloudflare](https://nuxt.com/deploy/cloudflare)
- [NuxtHub](https://nuxt.com/deploy/nuxthub)
- [Vercel](https://nuxt.com/deploy/vercel)
- [Netlify](https://nuxt.com/deploy/netlify)

您需要做的就是将构建命令设置为：

```bash [Terminal]
nuxi build
```

生成的输出将与所选平台兼容。

::note
链接的数据库将在服务器端启动服务器时加载。在浏览器中，将加载 [WASM SQLite](/docs/advanced/database#wasm-sqlite-in-browser) 数据库用于客户端导航和操作。
::

::tip
如果您希望部署到 AWS Lambda 或 Azure Static Web Apps，您需要确保您的 sqlite 文件位于 `/tmp` 中，因为这是唯一可写的文件夹

```ts
export default defineNuxtConfig({
  modules: ['@nuxt/content'],
  content: {
    database: {
      type: 'sqlite',
      filename: '/tmp/contents.sqlite'
    }
  }
})
```
::

### 3. 通过预渲染优化

由于每个请求都会触发您的 Nuxt 服务器的新实例，如果您不预渲染某些页面，无服务器应用程序的性能将会受到影响。

为了优化您的无服务器应用程序，您可以使用 `routeRules` 选项预渲染您的页面：

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  routeRules: {
    '/': { prerender: true }
  }
})
```

::tip{to="https://hub.nuxt.com/docs/recipes/pre-rendering"}
我们建议查看 **NuxtHub 的预渲染指南** 以了解更多关于优化无服务器应用程序的不同策略，这适用于所有无服务器平台。
::